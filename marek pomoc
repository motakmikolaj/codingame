import sys
import math
import random

ghosts = []
busters = []
initiate_area = 0
add_busters = 0
vmovetmp = 0
vmove = [1950, 3900, 5850, 7000]
horizontal = 0
vertical = 0
afk = 0
 
def hunt_area(number_of_busters):
    tmp = int(16000/number_of_busters)
    result = [1000]
    for i in range(number_of_busters):
        result.append(tmp*(i+1))
    result.append(14500)
    return result
 
def choose_closest(x, y):
    smallest = 9999999
    tmp = 0
    for i in range(len(busters)):
        sidex = busters[i].x - x
        sidey = busters[i].y - y
        sideL = math.sqrt(sidex**2 + sidey**2)
        if sideL < smallest:
            smallest = sideL
            tmp = i
    return [tmp, smallest]
 
class Ghost:
 
    def __init__(self, id, x, y, state, value):
        self.id = id
        self.x = x
        self.y = y
        self.state = state
        self.value = value
        self.target = False
        self.busted = False
 
class Buster:
 
    def __init__(self, id, x, y, left, right, state, value):
        self.id = id
        self.x = x
        self.y = y
        self.left = left
        self.right = right
        self.state = state
        self.catching = False
        self.destx = 0
        self.desty = 0
        self.chasing = [False, -1]
        self.order = ""
        self.busted = [False, -1]
 
    def move(self):
        print("move", self.id, self.destx, self.desty, file=sys.stderr)
        self.order = "MOVE " + str(self.destx) + " " + str(self.desty)
 
    def base(self, team_id):
        self.destx = team_id * 16000
        self.desty = team_id * 9000
 
    def bust(self, ghost_id):
        self.order = "BUST " + str(ghost_id)
        ghost_id = True
        self.busted = [True, ghost_id]
 
    def release_ghost(self):
        self.order = "RELEASE"
        self.catching = False
        self.chasing = [False, -1]
        self.busted = [False, -1]
 
busters_per_player = int(input())  # the amount of busters you control
ghost_count = int(input())  # the amount of ghosts on the map
my_team_id = int(input())  # if this is 0, your base is on the top left of the map, if it is one, on the bottom right
hunt_area = hunt_area(busters_per_player)  #divides space to create areas for each buster to patrol
 
# game loop
while True:
    entities = int(input())  # the number of busters and ghosts visible to you
    for i in range(entities):
        entity_id, x, y, entity_type, state, value = [int(j) for j in input().split()]
        if entity_type == -1:
            add = True
            for i in ghosts:
                if i.id == entity_id:
                    add = False
            if add:
                ghosts.append(Ghost(entity_id, x, y, state, value))
            else:
                for i in ghosts:
                    if i.id == entity_id:
                        i.x = x
                        i.y = y
                        i.state = state
                        i.value = value
        elif add_busters < busters_per_player and entity_type == my_team_id:
            busters.append(Buster(entity_id, x, y, -1, -1, state, value))
            add_busters += 1
        elif entity_type == my_team_id:
            for i in busters:
                if i.id == entity_id:
                    i.state = state
                    i.value = value
                    i.x = x
                    i.y = y
 
    for i in range(busters_per_player):
        print("================", file=sys.stderr)
        print(i, file=sys.stderr)
        current_buster = busters[i]
 
        if initiate_area < busters_per_player:
                current_buster.left = hunt_area[i]
                current_buster.right = hunt_area[i+1]
                initiate_area += 1
                horizontal = random.randint(current_buster.left, current_buster.right)
                vertical = random.randint(vmove[vmovetmp], vmove[vmovetmp+1])
                current_buster.destx = horizontal
                current_buster.desty = vertical
 
        if current_buster.state:
            print("x1", file=sys.stderr)
            current_buster.base(my_team_id)
            sidex = current_buster.x - current_buster.destx
            sidey = current_buster.y - current_buster.desty
            sideL = math.sqrt(sidex**2 + sidey**2)
           
            print([current_buster.x, current_buster.y, current_buster.state, current_buster.catching, current_buster.destx, current_buster.desty, current_buster.chasing], file=sys.stderr)
            print(sideL, file=sys.stderr)
           
            if sideL < 1600:
                current_buster.release_ghost()
            else:
                current_buster.move()
        elif current_buster.chasing[0]:
            print("x2", file=sys.stderr)
            print([current_buster.x, current_buster.y, current_buster.state, current_buster.catching, current_buster.destx, current_buster.desty, current_buster.chasing], file=sys.stderr)
            tmp = 0
            for i in ghosts:
                if i.busted:
                    continue
                print([i.id, i.x, i.y, i.state, i.value, i.target], file=sys.stderr)
                tmp += 1
                if i.id == current_buster.chasing[1]:
                    sidex = current_buster.x - i.x
                    sidey = current_buster.y - i.y
                    sideL = math.sqrt((i.x - current_buster.x)**2 + (i.y - current_buster.y)**2)
                    print("true", sideL, file=sys.stderr)
                    if sideL < 1760:
                        if sideL > 900:
                            current_buster.catching = True
                            current_buster.bust(i.id)
                            break
                        else:
                            current_buster.destx = int(i.x + math.copysign(637, sidex))
                            current_buster.desty = int(i.y + math.copysign(637, sidey))
                            current_buster.move()
                            break
                    else:
                        current_buster.destx = int(i.x + math.copysign(637, sidex))
                        current_buster.desty = int(i.y + math.copysign(637, sidey))
                        current_buster.move()
                       
                        break
            if tmp == len(ghosts):
                current_buster.chasing = [False, 0]
        else:
            print("x3", file=sys.stderr)
            print([current_buster.x, current_buster.y, current_buster.state, current_buster.catching, current_buster.destx, current_buster.desty, current_buster.chasing], file=sys.stderr)
            for ghost in ghosts:
                print([ghost.id, ghost.x, ghost.y, ghost.state, ghost.value, ghost.target], file=sys.stderr)
                if ghost.busted:
                    continue
                if not ghost.target:
                        closest = choose_closest(ghost.x, ghost.y)
                        other_buster = busters[closest[0]]
                        print(["other", other_buster.id, "ghost:", ghost.id, ghost.x, ghost.y], file=sys.stderr)
                        sideL = closest[1]
                        sidex = other_buster.x - ghost.x
                        sidey = other_buster.y - ghost.y
                        #sideL = math.sqrt(sidex**2 + sidey**2)
                        #if sideL < 2200:
                        if sideL < 900:
                            other_buster.destx = int(ghost.x + math.copysign(1000, sidex))
                            other_buster.desty = int(ghost.y + math.copysign(1000, sidey))
                            ghost.target = True
                            other_buster.chasing = [True, ghost.id]
                            print(other_buster.id, "move1", file=sys.stderr)
                            other_buster.move()
                            break
                        elif math.sqrt((ghost.x - other_buster.x)**2 + (ghost.y - other_buster.y)**2) > 1700:
                            other_buster.destx = int(ghost.x + math.copysign(1000, sidex))
                            other_buster.desty = int(ghost.y + math.copysign(1000, sidey))
                            ghost.target = True
                            other_buster.chasing = [True, ghost.id]
                            print(other_buster.id, "move2", file=sys.stderr)
                            other_buster.move()
                            break
                        else:
                            print(other_buster.id, "move3", file=sys.stderr)
                            other_buster.catching = True
                            other_buster.bust(ghost.id)
                            break

            if not current_buster.catching:
                if current_buster.x == current_buster.destx and current_buster.y == current_buster.desty:
                    vmovetmp = (vmovetmp + 1) % 3
                    horizontal = random.randint(current_buster.left, current_buster.right)
                    vertical = random.randint(vmove[vmovetmp], vmove[vmovetmp+1])
                    current_buster.destx = horizontal
                    current_buster.desty = vertical
                print(current_buster.id, "move4", file=sys.stderr)
                current_buster.move()
                            
        print(current_buster.order)
